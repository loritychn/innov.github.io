<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>INNOV智能问答</title>
    <script src="https://cdn.jsdelivr.net/npm/@openai/api-js@0.6.0"></script>
    <style>
      .chat-container {
        width: 80%;
        margin: 0 auto;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 10px;
        background-color: #f5f5f5;
      }
      .chat-bubble {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 10px;
        background-color: #fff;
      }
      .user-bubble {
        text-align: right;
        background-color: #b2dfdb;
      }
      .bot-bubble {
        text-align: left;
        background-color: #fce4ec;
      }
      input[type=text] {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
      }
      button[type=submit] {
        background-color: #4CAF50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>INNOV智能问答</h1>
    <div class="chat-container" id="chat-container"></div>
    <form onsubmit="return sendMessage()">
      <input type="text" id="message" placeholder="请输入您的问题">
      <button type="submit">发送</button>
    </form>

    <script>
      const openai = new OpenAI('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');
      const container = document.getElementById('chat-container');

      async function sendMessage() {
        // 获取用户输入的问题
        var message = document.getElementById("message").value;

        // 显示用户输入的问题
        var userBubble = document.createElement('div');
        userBubble.classList.add('chat-bubble', 'user-bubble');
        userBubble.innerHTML = message;
        container.appendChild(userBubble);

        // 调用ChatGPT API获取答案
        const answer = await openai.complete({
          engine: 'davinci',
          prompt: message,
          maxTokens: 150,
          n: 1,
          stop: '\n',
        });

        // 显示ChatGPT的回答
        var botBubble = document.createElement('div');
        botBubble.classList.add('chat-bubble', 'bot-bubble');
        botBubble.innerHTML = answer.choices[0].text;
        container.appendChild(botBubble);

        // 清空文本框
        document.getElementById("message").value = '';

        return false;
      }
    </script>
  </body>
</html>
